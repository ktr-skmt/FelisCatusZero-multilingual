runMode = ProcessDetail
//runMode = Development

systemName = "Baseline"

qalab {
  teamId = "Forst"
  runId = 1
  wantToOutputForExtractionSubtask = false
  wantToOutputForSummarizationSubtask = false
  wantToOutputForEvaluationMethodSubtask = false

}

preprocess {
  doFastText = false
  ja {
    doCharacterLevelIndriIndex = false
    doContentWordLevelIndriIndex = false
  }

  en {
    doTokenLevelIndriIndex = false
    doContentWordLevelIndriIndex = false
  }
}

wantToBrowse = true

needInitialSentenceTimeAnalysisByTextbook = true

resourcesDir = src/main/resources/

lang = ja

numOfScores = 2

sentenceSelection {
  limit = 2 // bottle neck regarding execution time
}

concept {
  nGram {
    n = 2
    gap = 0
  }
  tokenizer = CharacterNGram
  sentenceSplitter = none
}

passage {
  use = false
  window = 3
}

analyzer {
  mainMorphemeAnalyzer = UniDicMeCab

  mecab {
    timeout = 10//minutes

    ipadic {
      use = true
      dir = /usr/local/lib/mecab/dic/ipadic
      userDic = src/main/resources/mecab/ipadic/world_history.dic

      cabocha {
        use = true

        chapas {
          use = true
        }
      }
    }
    unidic {
      use = true
      dir = /usr/local/lib/mecab/dic/unidic
      userDic = src/main/resources/mecab/unidic/world_history.dic

      cabocha {
        use = false
      }
    }
    jumandic = {
      use = false
      dir = /usr/local/lib/mecab/dic/jumandic

      cabocha {
        use = false
      }
    }
  }

  chasen {
    ipadic {
      use = false
      dir = /usr/local/lib/chasen/dic/ipadic
    }
    unidic {
      use = false
      dir = /usr/local/lib/chasen/dic/unidic
    }
    naistdic {
      use = false
      dir = /usr/local/lib/chasen/dic/naistdic
    }
  }

  juman {
    use = false

    knp {
      use = false
    }
  }

  jumanPlusPlus {
    use = false
  }

  kytea {
    use = false
  }
}

qalab {
  datasetPath = src/main/resources/qalab_dataset
}


exam {
  essayExamDir = src/main/resources/qa_corpus

  ja {
    nationalCenterTestDir = res/national_center_test/uima.modules.qa.question/ja
    secondStageExaminationDir = res/second_stage_examination/ja
  }

  en {
    nationalCenterTestDir = res/national_center_test/uima.modules.qa.question/en
    secondStageExaminationDir = res/second_stage_examination/en
  }
}

schema {
  qaCorpus = src/main/resources/schema/qa_corpus.xsd
  qalabDataset = src/main/resources/schema/second_stage_exam.xsd
}

wordEmbedding {
  fastText {
    generator {
      timeout = 10
      minCount = 1
    }
    extractor {
      timeout = 10
    }
    ja {
      resource = out/fastText/ja/data.txt
      model = out/fastText/ja/model
      query = out/fastText/ja/query.txt
    }
    en {
      resource = out/fastText/en/data.txt
      model = out/fastText/en/model
      query = out/fastText/en/query.txt
    }
  }
}

normalizationDictionary {
  timeout = 1
}

indri {
  count = 100
  memory = "1200m"
  timeout = 10//minutes
  home = ${HOME}

  segmentation {
    tokenLevel {
      textbook {
        en = [
          /whe/seg/tokyoshoseki/world_history_textbook_a/,
          /whe/seg/tokyoshoseki/world_history_textbook_b/,
          /whe/seg/tokyoshoseki/world_history_textbook_b_shinsen/,
          /whe/seg/yamakawa/world_history_textbook_b/
        ]
      }

      glossary {
        en = [
          /whe/seg/yamakawa/world_history_glossary/
        ]
      }
    }

    characterLevel {
      textbook {
        ja = [
          /wh/seg/tokyoshoseki/world_history_textbook_a/,
          /wh/seg/tokyoshoseki/world_history_textbook_b/,
          /wh/seg/tokyoshoseki/world_history_textbook_b_shinsen/,
          /wh/seg/yamakawa/world_history_textbook_b/
        ]
      }

      glossary {
        ja = [
          /wh/seg/yamakawa/world_history_glossary/
        ]
      }
    }

    wordLevel {
      textbook {
        ja = [
          /wh/segW/tokyoshoseki/world_history_textbook_a/,
          /wh/segW/tokyoshoseki/world_history_textbook_b/,
          /wh/segW/tokyoshoseki/world_history_textbook_b_shinsen/,
          /wh/segW/yamakawa/world_history_textbook_b/
        ]

        en = [
          /whe/segW/tokyoshoseki/world_history_textbook_a/,
          /whe/segW/tokyoshoseki/world_history_textbook_b/,
          /whe/segW/tokyoshoseki/world_history_textbook_b_shinsen/,
          /whe/segW/yamakawa/world_history_textbook_b/
        ]
      }

      glossary {
        ja = [
          /wh/segW/yamakawa/world_history_glossary/
        ]

        en = [
          /whe/segW/yamakawa/world_history_glossary/
        ]
      }
    }
  }
}

knowledgeSource {
  trecTextFormat {
    textbook {
      ja = [
        /wh/res/tokyoshoseki/world_history_textbook_a/,
        /wh/res/tokyoshoseki/world_history_textbook_b/,
        /wh/res/tokyoshoseki/world_history_textbook_b_shinsen/,
        /wh/res/yamakawa/world_history_textbook_b/
      ]

      en = [
        /whe/res/tokyoshoseki/world_history_textbook_a/,
        /whe/res/tokyoshoseki/world_history_textbook_b/,
        /whe/res/tokyoshoseki/world_history_textbook_b_shinsen/,
        /whe/res/yamakawa/world_history_textbook_b/
      ]
    }

    glossary {
      ja = [
        /wh/res/yamakawa/world_history_glossary/
      ]

      en = [
        /whe/res/yamakawa/world_history_glossary/
      ]
    }
  }

  indriIndex {
    timeout = 10//minutes

    tokenLevel {
      wikipedia {
        en = [
          ""
        ]
      }

      textbook {
        en = [
          /whe/index/tokyoshoseki/world_history_textbook_a_index,
          /whe/index/tokyoshoseki/world_history_textbook_b_index,
          /whe/index/tokyoshoseki/world_history_textbook_b_shinsen_index,
          /whe/index/yamakawa/world_history_textbook_b_index
        ]
      }

      glossary {
        en = [
          /whe/index/yamakawa/world_history_glossary_index
        ]
      }

      geo {
        en = [
          /whe/index/geo/geo_index
        ]
      }
    }

    characterLevel {
      wikipedia {
        ja = [
          /Desktop/QALab/indexing/indri-index/indri-index/wiki-index
        ]
      }

      textbook {
        ja = [
          /wh/index/tokyoshoseki/world_history_textbook_a_index,
          /wh/index/tokyoshoseki/world_history_textbook_b_index,
          /wh/index/tokyoshoseki/world_history_textbook_b_shinsen_index,
          /wh/index/yamakawa/world_history_textbook_b_index
        ]
      }

      glossary {
        ja = [
          /wh/index/yamakawa/world_history_glossary_index
        ]
      }

      geo {
        ja = [
          /wh/index/geo/geo_index
        ]
      }
    }

    wordLevel {
      textbook {
        ja = [
          /wh/indexW/tokyoshoseki/world_history_textbook_a_index,
          /wh/indexW/tokyoshoseki/world_history_textbook_b_index,
          /wh/indexW/tokyoshoseki/world_history_textbook_b_shinsen_index,
          /wh/indexW/yamakawa/world_history_textbook_b_index
        ]

        en = [
          /whe/indexW/tokyoshoseki/world_history_textbook_a_index,
          /whe/indexW/tokyoshoseki/world_history_textbook_b_index,
          /whe/indexW/tokyoshoseki/world_history_textbook_b_shinsen_index,
          /whe/indexW/yamakawa/world_history_textbook_b_index
        ]
      }

      glossary {
        ja = [
          /wh/indexW/yamakawa/world_history_glossary_index
        ]

        en = [
          /whe/indexW/yamakawa/world_history_glossary_index
        ]
      }
    }
  }

  geo {
    ja {
      nameList = /wh/res/geo/list.txt
    }

    en {
      nameList = /whe/res/geo/list.txt
    }
  }

  time {
    ja {
      listFromGlossary = src/main/resources/geotime/time_extracted_from_glossary_ja.csv
    }

    en {
      listFromGlossary = src/main/resources/geotime/time_extracted_from_glossary_en.csv
    }
  }

  eventOntology {
    class {
      ja = src/main/resources/ontology/class/ja/

      en = src/main/resources/ontology/class/en/
    }
  }
}

pas {
  chapas = "java -Xmx1g -jar "${HOME}"/bin/chapas-0.742/chapas.jar -I RAW"
  showcase = ${HOME}"/bin/showcase/bin/showcase"
}

dep-parser {
  cabocha {
    cmd = /opt/local/bin/cabocha
    opt {
      juman = "-P JUMAN -d /opt/local/lib/mecab/dic/jumandic -m /opt/local/lib/cabocha/model/dep.juman.model -M /opt/local/lib/cabocha/model/chunk.juman.model -N /opt/local/lib/cabocha/model/ne.juman.model"
      ipa-naist-dic = "-P IPA -d /opt/local/lib/mecab/dic/naist-jdic -m /opt/local/lib/cabocha/model/dep.ipa.model -M /opt/local/lib/cabocha/model/chunk.ipa.model -N /opt/local/lib/cabocha/model/ne.ipa.model"
    }
  }
}

//native2ascii = ""

needInitialSentenceTimeAnalysisByTextbook = true

resourcesDir = src/main/resources/

concept {
  nGram {
    n = 2
    gap = 0
  }
  tokenizer = CharacterNGram
  sentenceSplitter = none
}

indri {
  tfidf {
    k1 = 1.2
    b = 0.75
  }
  bm25 {
    k1 = 1.2
    b = 0.75
    k3 = 7
  }
}

mmr {
  lambda = 0.5
}

vector {
  concept {
    nGram {
      n = 2
      gap = 0
    }
    tokenizer = CharacterNGram
    sentenceSplitter = none
  }

  isFrequencyOtherwiseBinary = false

  similarity = Cosine

  dissimilarity = Euclidean

  convergence = Rus05

  granularity = Sentence

  updateTypeScorer = Entailment

  noUpdateTypeScorer = Relevance

  fScoreBeta = 1

  minkowskyQ = 1.5

  tverskyA = 1

  tverskyB = 1

  jaroWinklerThreshold = 0.7

  //should not exceed 0.25
  jaroWinklerScalingFactor = 0.1

  damerauLevenshteinDeleteCost = 1

  damerauLevenshteinInsertCost = 1

  damerauLevenshteinReplaceCost = 1

  damerauLevenshteinSwapCost = 1
}